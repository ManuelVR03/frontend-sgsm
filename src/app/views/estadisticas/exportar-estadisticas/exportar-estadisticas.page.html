<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Exportar Estadísticas</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancelar()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="formPeriodo">
    <ion-item lines="full">
      <ion-label position="floating">Periodo</ion-label>
      <ion-select formControlName="periodo" interface="popover" placeholder="Seleccionar...">
        <ion-select-option *ngFor="let p of periodos" [value]="p">{{ p }}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-note color="danger" *ngIf="formPeriodo.get('periodo')?.invalid && formPeriodo.get('periodo')?.touched">
      Elige un periodo válido.
    </ion-note>

    <ion-item *ngIf="formPeriodo.value.periodo === 'Mensual'" lines="full">
      <ion-label position="floating">Mes</ion-label>
      <ion-select formControlName="mes" interface="popover">
        <ion-select-option *ngFor="let m of meses" [value]="m">{{ m }}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-note color="danger" *ngIf="formPeriodo.get('mes')?.invalid && formPeriodo.get('mes')?.touched">
      Selecciona un mes.
    </ion-note>

    <ion-item *ngIf="formPeriodo.value.periodo === 'Trimestral'" lines="full">
      <ion-label position="floating">Trimestre</ion-label>
      <ion-select formControlName="trimestre" interface="popover">
        <ion-select-option *ngFor="let t of trimestres" [value]="t">{{ t }}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-note color="danger" *ngIf="formPeriodo.get('trimestre')?.invalid && formPeriodo.get('trimestre')?.touched">
      Selecciona un trimestre.
    </ion-note>

    <ion-item *ngIf="formPeriodo.value.periodo === 'Semestral'" lines="full">
      <ion-label position="floating">Semestre</ion-label>
      <ion-select formControlName="semestre" interface="popover">
        <ion-select-option *ngFor="let s of semestres" [value]="s">{{ s }}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-note color="danger" *ngIf="formPeriodo.get('semestre')?.invalid && formPeriodo.get('semestre')?.touched">
      Selecciona un semestre.
    </ion-note>

    <ion-item lines="full">
      <ion-label position="floating">Año</ion-label>
      <ion-select formControlName="anio" interface="popover">
        <ion-select-option *ngFor="let a of anios" [value]="a">{{ a }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-row class="ion-margin-top">
      <ion-col>
        <ion-button expand="block" color="medium" (click)="cancelar()">Cancelar</ion-button>
      </ion-col>
      <ion-col>
        <ion-button expand="block" color="success" (click)="exportar()" [disabled]="formPeriodo.invalid">
          Exportar
        </ion-button>
      </ion-col>
    </ion-row>
  </form>
</ion-content>
